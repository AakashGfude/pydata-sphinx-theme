{% extends "!basic-ng/layout.html" %}
{%- import "static/webpack-macros.html" as _webpack with context %}

{# Metadata and asset linking #}

{# Create the sidebar links HTML here to re-use in a few places #}
{# If we have no sidebar links, pop the links component from the sidebar list #}
{%- set sidebar_nav_html = generate_nav_html("sidebar",
    show_nav_level=theme_show_nav_level|int,
    maxdepth=theme_navigation_depth|int,
    collapse=theme_collapse_navigation|tobool,
    includehidden=True,
    titles_only=True)
-%}
{% if not sidebar_nav_html %}
{% set sidebars = sidebars | reject("in", "sidebar-nav-bs.html") | list %}
{% endif %}

{# A flag for whether we include a secondary sidebar based on the page metadata #}
{% set use_sidebar_secondary = meta is defined and meta is not none and 'theme_html_remove_secondary_sidebar' not in meta %}

{%- block head_stylesheets %}
  {{ super() }}
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "{{ default_mode }}";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  {{ _webpack.head_pre_assets() }}
  {{ _webpack.head_pre_icons() }}
  {{ _webpack.head_js_preload() }}
{%- endblock %}

{%- block extrahead %}
  <meta name="docsearch:language" content="{{ language }}">
{%- endblock %}

{% block body_tag_attrs %} data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="{{ default_mode }}"
  {# set up with scrollspy to update the toc as we scroll #}
  {# ref: https://getbootstrap.com/docs/4.0/components/scrollspy/ #}
{%- endblock %}

{% block head_javascript %}
  {% for js in script_files -%}
    {{ js_tag(js) }}
  {% endfor -%}
{% endblock %}

{% block body_javascript -%}
{%- endblock body_javascript -%}
